(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{105:function(t,e,s){"use strict";s.r(e);var a={name:"IndexVenues"},n=s(0),r=Object(n.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("h3",{staticClass:"mb-0"},[s("div",{staticClass:"float-right"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-10"),expression:"$store.state.auth.hasRole('ad-10')"}],staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"ad.venues",params:{ops:"create"}}}},[t._v("\n                        Add New venue\n                    ")])],1)])]),t._v(" "),s("form",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group mb-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.filter.search,expression:"$parent.filter.search"}],staticClass:"form-control",attrs:{placeholder:"Search by course code or name...",type:"text"},domProps:{value:t.$parent.filter.search},on:{input:function(e){e.target.composing||t.$set(t.$parent.filter,"search",e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$parent.get_venues(1)}}},[s("i",{staticClass:"ni ni-zoom-split-in"}),t._v("\n                            Search\n                        ")])])])])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[t._m(0),t._v(" "),s("tbody",[t._l(t.$parent.venues.data,(function(e){return s("tr",[s("td",[s("router-link",{staticClass:"btn btn-primary btn-sm",attrs:{to:{name:"ad.venues",params:{id:e.id}}}},[s("i",{staticClass:"ni ni-bold-right"})])],1),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.type))])])})),t._v(" "),t._m(1)],2)]),t._v(" "),s("laravel-vue-pagination",{attrs:{limit:5,data:t.$parent.venues,align:"center"},on:{"pagination-change-page":t.$parent.get_venues}})],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{scope:"col"}}),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Type")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{attrs:{scope:"row"}}),this._v(" "),e("td"),this._v(" "),e("td")])}],!1,null,"1541edfc",null).exports,i={name:"ViewVenues"},o=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0",attrs:{id:"view"}},[s("div",{staticClass:"card-header bg-transparent"},[s("h3",{staticClass:"mb-0"},[s("div",{staticClass:"float-left"},[s("router-link",{staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"ad.venues"}}},[s("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                    ")])],1),t._v(" "),s("div",{staticClass:"float-right"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-10"),expression:"$store.state.auth.hasRole('ad-10')"}],staticClass:"btn btn-outline-warning btn-sm",attrs:{to:{name:"ad.venues",params:{id:t.$parent.venue.id,ops:"edit"}}}},[t._v("\n                        Edit\n                    ")]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-10"),expression:"$store.state.auth.hasRole('ad-10')"}],staticClass:"btn btn-outline-danger btn-sm",attrs:{to:{name:"ad.venues",params:{id:t.$parent.venue.id,ops:"delete"}}}},[t._v("\n                        Delete\n                    ")])],1)])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[s("tbody",[s("tr",[s("td",[t._v("Name")]),t._v(" "),s("th",[t._v(t._s(t.$parent.venue.name))])]),t._v(" "),s("tr",[s("td",[t._v("Type")]),t._v(" "),s("th",[t._v(t._s(t.$parent.venue.type))])]),t._v(" "),s("tr",[s("td",[t._v("Description")]),t._v(" "),s("th",[t._v(t._s(t.$parent.venue.description))])]),t._v(" "),s("tr",[s("td",[t._v("Address")]),t._v(" "),s("th",[t._v(t._s(t.$parent.venue.address))])]),t._v(" "),s("tr",[s("td",[t._v("Capacity")]),t._v(" "),s("th",[t._v(t._s(t.$parent.venue.capacity))])])])])])])])}),[],!1,null,"5781430c",null).exports,u={name:"FormVenues"};function l(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=function(t,e){if(!t)return;if("string"==typeof t)return c(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return c(t,e)}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return i=t.done,t},e:function(t){o=!0,r=t},f:function(){try{i||null==s.return||s.return()}finally{if(o)throw r}}}}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}var p={name:"Venues",components:{FormVenues:Object(n.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0",attrs:{id:"view"}},[s("div",{staticClass:"card-header bg-transparent"},[s("router-link",{staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"ad.venues"}}},[s("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                ")]),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$parent.form.title)}})],1),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:t.$parent.submitForm}},[s("fake-form-input"),t._v(" "),s("div",{staticClass:"form-group mb-3"},[void 0!==t.$parent.form.input.name?s("div",{staticClass:"input-group"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.name,expression:"$parent.form.input.name"}],staticClass:"form-control",attrs:{placeholder:"venue name",type:"text",required:""},domProps:{value:t.$parent.form.input.name},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"name",e.target.value)}}})]):t._e()]),t._v(" "),s("div",{staticClass:"form-group mb-3"},[void 0!==t.$parent.form.input.address?s("div",{staticClass:"input-group"},[t._m(1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.address,expression:"$parent.form.input.address"}],staticClass:"form-control",attrs:{placeholder:"venue address",type:"text",required:""},domProps:{value:t.$parent.form.input.address},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"address",e.target.value)}}})]):t._e()]),t._v(" "),s("div",{staticClass:"form-group mb-3"},[void 0!==t.$parent.form.input.capacity?s("div",{staticClass:"input-group"},[t._m(2),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.capacity,expression:"$parent.form.input.capacity"}],staticClass:"form-control",attrs:{placeholder:"venue capacity",type:"number",required:""},domProps:{value:t.$parent.form.input.capacity},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"capacity",e.target.value)}}})]):t._e()]),t._v(" "),void 0!==t.$parent.form.input.description?s("div",{staticClass:"form-group mb-3"},[s("label"),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.description,expression:"$parent.form.input.description"}],staticClass:"form-control form-control-alternative",attrs:{required:"",rows:"4",placeholder:"venue description ..."},domProps:{value:t.$parent.form.input.description},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"description",e.target.value)}}})]):t._e(),t._v(" "),void 0!==t.$parent.form.input.type?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(3),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.type,expression:"$parent.form.input.type"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.$parent.form.input,"type",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:"auditorium"}},[t._v("Auditorium")]),t._v(" "),s("option",{attrs:{value:"class"}},[t._v("Class")]),t._v(" "),s("option",{attrs:{value:"lab"}},[t._v("Lab")])])])]):t._e(),t._v(" "),t._m(4)],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-align-left-2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-align-left-2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-align-left-2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-building"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Save changes")])])}],!1,null,"119d1b30",null).exports,ViewVenues:o,IndexVenues:r},data:function(){return{filter:{search:null,search_q:""},venues:null,venue:null,form:null}},mounted:function(){this.$store.state.page="venues"},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;"create"===this.$route.params.id||"create"===this.$route.params.ops?(this.venues=null,this.form={title:"Create New Venue",type:"c",input:{name:null,type:null,description:null,address:null,capacity:null}}):this.$route.params.id?(this.venues=null,axios.get("/admin/venues/"+this.$route.params.id).then((function(e){t.venue=e.data.venue,t.form=null,"edit"===t.$route.params.ops?t.form={title:"Edit Set "+t.venue.name,type:"e",input:{id:t.venue.id,name:t.venue.name,type:t.venue.type,description:t.venue.description,address:t.venue.address,capacity:t.venue.capacity}}:"delete"===t.$route.params.ops&&(t.form={title:"Delete Venue "+t.venue.name,type:"d",input:{id:t.venue.id}})}))):(this.venue=this.form=null,this.get_venues())},submitForm:function(t){switch(t.preventDefault(),this.form.type){case"c":this.postRequest("/admin/venues/store");break;case"d":this.postRequest("/admin/venues/destroy");break;case"e":this.postRequest("/admin/venues/edit")}},postRequest:function(t){var e=this;axios.post(t,this.form.input).then((function(t){t.data.venue?e.$router.push({name:"ad.venues",params:{id:e.venue.id}}):e.$router.push({name:"ad.venues"}),e.$root.post_success(t.data.success)}))},showCreate:function(){this.$refs.display_success_message.style.display="none",this.form.title="Add a new Academic Term",this.form.type="c",this.resetInputs(),this.displayInput(["name","type","description","address","capacity"],"show-input",!0)},showEdit:function(){this.$refs.display_success_message.style.display="none",this.form.title="Add a new Academic Term",this.form.type="e",this.form.input=this.venue,this.displayInput(["name","type","description","address","capacity"],"show-input",!0)},showDelete:function(){this.$refs.display_success_message.style.display="none",this.form.title="Add a new Academic Term",this.form.type="d",this.form.input=this.venue,this.displayInput(["name","type","description","address","capacity"],"show-input",!0)},displayInput:function(t,e,s){var a,n=l(t);try{for(n.s();!(a=n.n()).done;){var r=a.value;this.$refs[r].id=e,this.$refs[r].children[1].required=s}}catch(t){n.e(t)}finally{n.f()}},resetInputs:function(){for(var t=0,e=Object.keys(this.form.input);t<e.length;t++){var s=e[t];this.form.input[s]=null}},get_venues:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.filter.search&&(this.filter.search_q="&search="+this.filter.search),axios.get("/admin/venues?page="+e+this.filter.search_q).then((function(e){t.venues=e.data.venues}))},get_venue:function(t){var e=this;axios.get("/admin/venues/"+t).then((function(t){e.venue=t.data.venue}))},get_schools_departments:function(){var t=this;axios.get("/admin/get/departments?is_major=0&is_admin=0").then((function(e){t.departments=e.data.departments}))}}},d=Object(n.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t.venues?s("IndexVenues"):t._e(),t._v(" "),t.venue&&!t.form?s("ViewVenues"):t._e(),t._v(" "),t.form?s("FormVenues"):t._e()],1)}),[],!1,null,"14bcbd3e",null);e.default=d.exports}}]);