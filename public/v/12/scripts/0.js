(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{11:function(t,e,s){"use strict";var a={name:"ViewRoles",data:function(){return{group:{},window_roles:window.roles}},methods:{beforeOpen:function(t){this.group=t.params.group}}},r=s(0),i=Object(r.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("modal",{attrs:{scrollable:!0,name:"view-roles",height:"auto"},on:{"before-open":t.beforeOpen}},[s("div",{staticClass:"modal-header"},[s("h3",{staticClass:"modal-title",attrs:{id:"modal-title-create"}},[t._v("Roles for "),s("strong",[t._v(t._s(t.group.name))])])]),t._v(" "),s("div",{staticClass:"modal-body"},t._l(t.group.roles,(function(e){return s("li",[t._v(t._s(t.window_roles[e]))])})),0)])}),[],!1,null,"f62523b2",null);e.a=i.exports},117:function(t,e,s){"use strict";s.r(e);function a(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=function(t,e){if(!t)return;if("string"==typeof t)return r(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return r(t,e)}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var a=0,i=function(){};return{s:i,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,l=!0,o=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return l=t.done,t},e:function(t){o=!0,n=t},f:function(){try{l||null==s.return||s.return()}finally{if(o)throw n}}}}function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}var i={name:"profile",components:{ViewRoles:s(11).a},data:function(){return{user:[],roles:window.roles,form:{input:{image:""},message:{errors:[],success:[]}},switch_action:{error:!1,success:!1}}},mounted:function(){this.fectchUserProfile(),this.$store.state.page="Profile"},methods:{switchProfile:function(t){var e=this;t.id!==this.user.profile_id&&axios.post("/user/switch",{profile:t.id}).then((function(t){null===t.data.success?e.switch_action.error=!0:(e.switch_action.success=!0,location.reload())}))},onFileChange:function(t){var e=t.target.files||t.dataTransfer.files;e.length&&this.createImage(e[0])},createImage:function(t){var e=this,s=new FileReader;s.onload=function(t){e.form.input.image=t.target.result},s.readAsDataURL(t)},upload:function(){var t=this;this.form.message.errors=[],this.form.message.success=[],"image"===this.form.input.image.substr(5,5)?axios.post("/user/upload",{image:this.form.input.image}).then((function(e){t.form.message.success.push(e.data.success),window.Save.store("img",e.data.img),t.$store.state.auth.img=e.data.img})):this.form.message.errors.push({msg:"Invalid! Must select a image."})},fectchUserProfile:function(){var t=this;axios.get("/user/profile").then((function(e){t.user=e.data.user;var s,r=a(t.user.profiles);try{for(r.s();!(s=r.n()).done;){var i=s.value;t.user.profile_id===i.id&&(t.user.profile=i,t.user.profile.department=i.department)}}catch(t){r.e(t)}finally{r.f()}}))},gender:function(t){return"m"===t?"Male":"Female"},user_type:function(t){return window.user_type[t]}}},n=s(0),l=Object(n.a)(i,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-7"},[s("div",{staticClass:"card bg-secondary shadow"},[t._m(0),t._v(" "),s("div",{staticClass:"card-body"},[s("table",{staticClass:"table align-items-center table-flush"},[s("tbody",[s("tr",[s("td",{staticClass:"text-center"},[s("img",{staticClass:"img-thumbnail",attrs:{src:"/"+this.$store.state.auth.img}})])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("#")]),s("h2",[t._v(t._s(this.user.num))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("First Name")]),s("h3",[t._v(t._s(this.user.first_name))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("Middle Name")]),s("h3",[t._v(t._s(this.user.middle_name))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("Last Name")]),s("h3",[t._v(t._s(this.user.last_name))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("Email")]),s("h3",[t._v(t._s(this.user.email))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("Telephone Number")]),s("h3",[t._v(t._s(this.user.tel))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("Address")]),s("h3",[t._v(t._s(this.user.address))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("Gender")]),s("h3",[t._v(t._s(this.gender(this.user.gender)))])])]),t._v(" "),s("tr",[s("th",[s("small",[t._v("Date Of Birth")]),s("h3",[t._v(t._s(this.user.dob))])])])])])])])]),t._v(" "),s("div",{staticClass:"col-md-5"},[s("div",{staticClass:"card shadow"},[s("div",{staticClass:"card-header bg-white border-0"},[s("div",{staticClass:"align-items-center"},[s("div",{staticClass:"float-left"},[s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn btn-outline-warning btn-sm dropdown-toggle",attrs:{type:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[t._v("\n                                Switch\n                            ")]),t._v(" "),s("div",{staticClass:"dropdown-menu"},t._l(t.user.profiles,(function(e){return s("button",{staticClass:"dropdown-item text-capitalize",on:{click:function(s){return t.switchProfile(e)}}},[e.id===t.user.profile.id?s("i",{staticClass:"ni ni-check-bold text-success"}):s("i",{staticClass:"ni ni-fat-delete"}),t._v(" "),s("strong",[t._v(t._s(t.user_type(e.type)))]),t._v(" in "),s("strong",[t._v(t._s(e.department.name))])])})),0)]),t._v(" "),t.switch_action.error?s("span",{staticClass:"badge badge-pill badge-danger"},[t._v("Error! Retry.")]):t._e(),t._v(" "),t.switch_action.success?s("span",{staticClass:"badge badge-pill badge-success"},[t._v("Switching Successful! Login again for changes to take effect.")]):t._e()]),t._v(" "),s("div",{staticClass:"float-right"},[t._v("Profiles")])])]),t._v(" "),t.user.profile?s("div",{staticClass:"card-body pt-0 pt-md-4"},[s("h4",{class:{"text-danger":!t.user.profile.active}},[t.user.profile.active?t._e():s("span",{staticClass:"badge badge-danger"},[t._v("Deactivated")]),s("br"),t._v(" "),s("div",{staticClass:"text-capitalize"},[s("small",[t._v("Type: ")]),t._v(t._s(t.$root.profile_type(t.user.profile.type))),s("br")]),t._v(" "),null!=t.user.profile.set?s("div",[s("small",[t._v("Set: ")]),t._v(t._s(t.user.profile.set.name)+"\n                    ")]):t._e(),t._v(" "),null!=t.user.profile.department?s("div",[s("small",[t._v("Department: ")]),t._v(" "),s("router-link",{attrs:{target:"_blank",to:{name:"ad.departments",params:{id:t.user.profile.department_id}}}},[t._v("\n                            "+t._s(t.user.profile.department.name)+"\n                        ")])],1):t._e(),t._v(" "),null!=t.user.profile.group?s("div",[s("small",[t._v("Role Group: ")]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-link",on:{click:function(e){return t.$modal.show("view-roles",{group:t.user.profile.group})}}},[t._v(t._s(t.user.profile.group.name))]),t._v(" "),s("ViewRoles")],1):t._e()]),t._v(" "),s("hr")]):t._e()])]),t._v(" "),s("div",{staticClass:"modal fade",attrs:{id:"modal-profile",tabindex:"-1",role:"dialog","aria-labelledby":"modal-profile","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog modal- modal-dialog-centered modal-",attrs:{role:"document"}},[s("div",{staticClass:"modal-content"},[t._m(1),t._v(" "),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"text-center text-muted mb-4"},[t._l(t.form.message.errors,(function(e){return s("div",{staticClass:"text-danger bold"},t._l(e,(function(e){return s("span",[s("li",[t._v(t._s(e))])])})),0)})),t._v(" "),t.form.message.success.length?s("div",{ref:"display_success_message",staticClass:"alert alert-success alert-dismissible fade show",attrs:{role:"alert"}},[t._m(2),t._v(" "),s("span",{staticClass:"alert-inner--text"},[s("strong",[t._v("Success!")]),t._v(" "),t._l(t.form.message.success,(function(e){return s("span",[t._v("\n                                    "+t._s(e)+"\n                                ")])}))],2)]):t._e()],2),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("img",{staticClass:"img-thumbnail",attrs:{src:t.form.input.image}}),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"row"},[s("input",{staticClass:"form-control col-8",attrs:{type:"file"},on:{change:t.onFileChange}}),t._v(" "),s("button",{staticClass:"btn btn-success col-4",on:{click:t.upload}},[t._v("Upload")])])])])])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header bg-white border-0"},[e("div",{staticClass:"row align-items-center"},[e("div",{staticClass:"col-8"},[e("h3",{staticClass:"mb-0"},[this._v("My account")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-header"},[e("h3",{staticClass:"modal-title",attrs:{id:"modal-title-create"}},[this._v("\n                        Update Profile\n                    ")]),this._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[this._v("Ã—")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"alert-inner--icon"},[e("i",{staticClass:"ni ni-like-2"})])}],!1,null,"65191a7c",null);e.default=l.exports}}]);