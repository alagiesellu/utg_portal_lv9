(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{105:function(t,e,s){"use strict";s.r(e);var a=s(5),r={name:"IndexSets"},n=s(0),i=Object(n.a)(r,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("h3",{staticClass:"mb-0"},[s("div",{staticClass:"float-right"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-8"),expression:"$store.state.auth.hasRole('ad-8')"}],staticClass:"btn btn-sm btn-outline-primary mb-3",attrs:{to:{name:"ad.sets",params:{ops:"create"}}}},[t._v("\n                        Add New Set\n                    ")])],1)])]),t._v(" "),s("form",{staticClass:"col-md-12"},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group mb-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.filter.search,expression:"$parent.filter.search"}],staticClass:"form-control",attrs:{placeholder:"Search by course code or name...",type:"text"},domProps:{value:t.$parent.filter.search},on:{input:function(e){e.target.composing||t.$set(t.$parent.filter,"search",e.target.value)}}}),t._v(" "),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$parent.get_sets(1)}}},[s("i",{staticClass:"ni ni-zoom-split-in"}),t._v("\n                            Search\n                        ")])])])])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[t._m(0),t._v(" "),s("tbody",t._l(t.$parent.sets.data,(function(e){return s("tr",[s("td",[s("router-link",{staticClass:"btn btn-primary btn-sm",attrs:{to:{name:"ad.sets",params:{id:e.id}}}},[s("i",{staticClass:"ni ni-bold-right"})])],1),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(t.$root.format_date(e.start_date)))]),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.expected_years))])])})),0)]),t._v(" "),s("laravel-vue-pagination",{attrs:{limit:5,data:t.$parent.sets,align:"center"},on:{"pagination-change-page":t.$parent.get_sets}})],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{scope:"col"}}),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Starting Date")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Expected Years")])])])}],!1,null,"014fb21c",null).exports,o={name:"ViewSets"},l=Object(n.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("h3",{staticClass:"mb-0"},[s("div",{staticClass:"float-left"},[s("router-link",{staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"ad.sets"}}},[s("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                    ")])],1),t._v(" "),s("div",{staticClass:"float-right"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-8"),expression:"$store.state.auth.hasRole('ad-8')"}],staticClass:"btn btn-outline-warning btn-sm",attrs:{to:{name:"ad.sets",params:{id:t.$parent.set.id,ops:"edit"}}}},[t._v("\n                        Edit\n                    ")]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-8"),expression:"$store.state.auth.hasRole('ad-8')"}],staticClass:"btn btn-outline-danger btn-sm",attrs:{to:{name:"ad.sets",params:{id:t.$parent.set.id,ops:"delete"}}}},[t._v("\n                        Delete\n                    ")])],1)])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[s("tbody",[s("tr",[s("td",[t._v("Name")]),t._v(" "),s("th",[t._v(t._s(t.$parent.set.name))])]),t._v(" "),s("tr",[s("td",[t._v("Degree")]),t._v(" "),s("th",[t._v(t._s(t.$parent.set.degree))])]),t._v(" "),s("tr",[s("td",[t._v("Start Date")]),t._v(" "),s("th",[t._v(t._s(t.$root.format_date(t.$parent.set.start_date)))])]),t._v(" "),s("tr",[s("td",[t._v("Expected Years")]),t._v(" "),s("th",[t._v(t._s(t.$parent.set.expected_years))])]),t._v(" "),s("tr",[s("td",[t._v("Department")]),t._v(" "),s("th",[t._v(t._s(t.$parent.set.department.name))])]),t._v(" "),s("tr",[s("td",[t._v("School/Faculty")]),t._v(" "),s("th",[t._v(t._s(t.$parent.set.school_department.name))])]),t._v(" "),s("tr",[s("td",[t._v("Grading System")]),t._v(" "),s("th",[t._v("\n                        "+t._s(t.$parent.set.grading_system.name)+"\n                        "),s("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(e){return t.$modal.show("view_grades")}}},[t._v("\n                            Grades\n                        ")]),t._v(" "),s("modal",{attrs:{scrollable:!0,name:"view_grades",height:"auto"}},[s("div",{staticClass:"modal-content"},[s("div",{staticClass:"modal-body",domProps:{innerHTML:t._s(t.$root.view_grades(t.$parent.set.grading_system.grades))}})])])],1)])])])]),t._v(" "),t.$parent.profiles?s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[t._m(0),t._v(" "),s("tbody",t._l(t.$parent.profiles.data,(function(e){return s("tr",[s("td",[s("router-link",{staticClass:"btn btn-primary btn-sm",attrs:{to:{name:"ad.users",params:{id:e.user_id}},target:"_blank"}},[s("i",{staticClass:"ni ni-bold-right"})])],1),t._v(" "),s("th",[t._v(t._s(e.user.num))]),t._v(" "),s("th",[t._v(t._s(t.$root.full_name(e.user)))]),t._v(" "),s("th",[t._v(t._s(e.user.email))])])})),0)]),t._v(" "),s("laravel-vue-pagination",{attrs:{limit:5,data:t.$parent.profiles,align:"center"},on:{"pagination-change-page":t.$parent.get_set_profiles}})],1):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{scope:"col"}}),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("#")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Name")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Email")])])])}],!1,null,"f723f16a",null).exports,p={name:"FormSets"},d={name:"Sets",components:{FormSets:Object(n.a)(p,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("span",{domProps:{textContent:t._s(t.$parent.form.title)}})]),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:t.$parent.submitForm}},[s("fake-form-input"),t._v(" "),void 0!==t.$parent.form.input.name?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.name,expression:"$parent.form.input.name"}],staticClass:"form-control",attrs:{placeholder:"set Name",type:"text",name:"name",required:""},domProps:{value:t.$parent.form.input.name},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"name",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.degree?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.degree,expression:"$parent.form.input.degree"}],staticClass:"form-control",attrs:{placeholder:"Degree",type:"text",name:"degree",required:""},domProps:{value:t.$parent.form.input.degree},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"degree",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.start_date?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(2),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.start_date,expression:"$parent.form.input.start_date"}],staticClass:"form-control",attrs:{placeholder:"Starting Date",type:"date",name:"start_date",required:""},domProps:{value:t.$parent.form.input.start_date},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"start_date",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.expected_years?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(3),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.expected_years,expression:"$parent.form.input.expected_years"}],staticClass:"form-control",attrs:{placeholder:"Expected Years",type:"number",name:"expected_years",min:"1",max:"10",required:""},domProps:{value:t.$parent.form.input.expected_years},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"expected_years",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.department_id?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(4),t._v(" "),s("v-select",{staticClass:"form-control",attrs:{options:t.$parent.departments,reduce:function(t){return t.id},label:"name"},scopedSlots:t._u([{key:"search",fn:function(e){var a=e.attributes,r=e.events;return[s("input",t._g(t._b({staticClass:"vs__search",attrs:{required:!t.$parent.form.input.department_id}},"input",a,!1),r))]}}],null,!1,1535220183),model:{value:t.$parent.form.input.department_id,callback:function(e){t.$set(t.$parent.form.input,"department_id",e)},expression:"$parent.form.input.department_id"}})],1)]):t._e(),t._v(" "),void 0!==t.$parent.form.input.school_department_id?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(5),t._v(" "),s("v-select",{staticClass:"form-control",attrs:{options:t.$parent.school_departments,reduce:function(t){return t.id},label:"name"},scopedSlots:t._u([{key:"search",fn:function(e){var a=e.attributes,r=e.events;return[s("input",t._g(t._b({staticClass:"vs__search",attrs:{required:!t.$parent.form.input.school_department_id}},"input",a,!1),r))]}}],null,!1,3676775420),model:{value:t.$parent.form.input.school_department_id,callback:function(e){t.$set(t.$parent.form.input,"school_department_id",e)},expression:"$parent.form.input.school_department_id"}})],1)]):t._e(),t._v(" "),void 0!==t.$parent.form.input.grading_system_id?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(6),t._v(" "),s("v-select",{staticClass:"form-control",attrs:{options:t.$parent.grading_systems,reduce:function(t){return t.id},label:"name"},scopedSlots:t._u([{key:"search",fn:function(e){var a=e.attributes,r=e.events;return[s("input",t._g(t._b({staticClass:"vs__search",attrs:{required:!t.$parent.form.input.grading_system_id}},"input",a,!1),r))]}}],null,!1,2560989177),model:{value:t.$parent.form.input.grading_system_id,callback:function(e){t.$set(t.$parent.form.input,"grading_system_id",e)},expression:"$parent.form.input.grading_system_id"}})],1)]):t._e(),t._v(" "),t._m(7)],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-align-left-2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-align-left-2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-calendar-grid-58"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-watch-time"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Department")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("School/Faculty")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-building"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Save changes")])])}],!1,null,"f8e73b04",null).exports,ViewSets:l,IndexSets:i,FakeFormInputs:a.default},data:function(){return{filter:{search:null,search_q:""},sets:null,profiles:null,set:null,grading_systems:[],departments:[],school_departments:[],form:null}},mounted:function(){this.$store.state.page="Sets"},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;"create"===this.$route.params.id||"create"===this.$route.params.ops?(this.sets=null,this.get_grading_systems(),this.get_departments(),this.form={title:"Create New Set",type:"c",input:{name:null,degree:null,school_department_id:null,department_id:null,grading_system_id:null,start_date:null,expected_years:null}}):this.$route.params.id?(this.sets=null,axios.get("/admin/sets/"+this.$route.params.id).then((function(e){t.set=e.data.set,t.form=null,"edit"===t.$route.params.ops?(t.get_grading_systems(),t.get_departments(),t.form={title:"Edit Set "+t.set.name,type:"e",input:{id:t.set.id,name:t.set.name,degree:t.set.degree,department_id:t.set.department_id,school_department_id:t.set.school_department_id,grading_system_id:t.set.grading_system_id,start_date:t.set.start_date,expected_years:t.set.expected_years}}):"delete"===t.$route.params.ops?(t.get_grading_systems(),t.get_departments(),t.form={title:"Delete Set "+t.set.name,type:"d",input:{id:t.set.id}}):t.get_set_profiles()}))):(this.set=this.form=null,this.get_sets())},get_set_profiles:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/admin/profiles/set="+this.set.id+"?page="+e).then((function(e){t.profiles=e.data.profiles}))},submitForm:function(t){switch(t.preventDefault(),this.form.type){case"c":this.postRequest("/admin/sets/store");break;case"d":this.form.input.id=this.set.id,this.postRequest("/admin/sets/destroy");break;case"e":this.form.input.id=this.set.id,this.postRequest("/admin/sets/edit")}},postRequest:function(t){var e=this;axios.post(t,this.form.input).then((function(t){null!=t.data.set?e.$router.push({name:"ad.sets",params:{id:e.set.id}}):e.$router.push({name:"ad.sets"}),e.$root.post_success(t.data.success)}))},get_grading_systems:function(){var t=this;axios.get("/admin/current/grading-systems").then((function(e){t.grading_systems=e.data.grading_systems}))},get_departments:function(){var t=this;axios.get("/admin/get/departments?is_major=1").then((function(e){t.departments=e.data.departments})),axios.get("/admin/get/departments?is_admin=0&is_major=0").then((function(e){t.school_departments=e.data.departments}))},get_sets:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.filter.search&&(this.filter.search_q="&search="+this.filter.search),axios.get("/admin/sets?page="+e+this.filter.search_q).then((function(e){t.sets=e.data.sets}))},get_set:function(t){var e=this;axios.get("/admin/sets/"+t).then((function(t){e.set=t.data.set}))}}},c=Object(n.a)(d,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t.sets?s("IndexSets"):t._e(),t._v(" "),t.set&&!t.form?s("ViewSets"):t._e(),t._v(" "),t.form?s("FormSets"):t._e()],1)}),[],!1,null,"2e3f0fb5",null);e.default=c.exports}}]);