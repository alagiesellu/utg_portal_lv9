(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{130:function(t,s,a){"use strict";a.r(s);function e(t,s){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=function(t,s){if(!t)return;if("string"==typeof t)return r(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);"Object"===a&&t.constructor&&(a=t.constructor.name);if("Map"===a||"Set"===a)return Array.from(t);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return r(t,s)}(t))||s&&t&&"number"==typeof t.length){a&&(t=a);var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==a.return||a.return()}finally{if(l)throw i}}}}function r(t,s){(null==s||s>t.length)&&(s=t.length);for(var a=0,e=new Array(s);a<s;a++)e[a]=t[a];return e}var n={name:"StudentsClasses",data:function(){return{students_registrations:{},registration:null,sr:null,form:{input:{}}}},created:function(){this.fetchData(),this.$parent.fetchData()},watch:{$route:"fetchData"},methods:{submitForm:function(t){var s=this;t.preventDefault(),axios.post("/academic/classes/"+this.sr.id+"/approve-registrations",this.form.input).then((function(t){s.$root.post_success(t.data.success),s.get_students(s.students_registrations.current_page),s.sr=null,s.$modal.hide("approval")}))},approval:function(t){this.sr=t,this.$modal.show("approval")},view_student:function(t){var s=this;axios.get("/academic/classes/registrations/get/"+t.id).then((function(t){if(s.registration=t.data.registration,s.registration.grades){s.registration.grades.score=s.registration.grades.total=0;var a,r=e(s.registration.grades.term_class.assessments);try{for(r.s();!(a=r.n()).done;){var n=a.value;null!=s.registration.grades.scores[n.id]&&(s.registration.grades.score+=parseFloat(s.registration.grades.scores[n.id])),s.registration.grades.total+=parseFloat(n.score)}}catch(t){r.e(t)}finally{r.f()}}})),this.$modal.show("view-modal")},fetchData:function(){this.get_students()},get_students:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/academic/classes/"+this.$route.params.id+"/registrations?page="+s).then((function(s){t.students_registrations=s.data.class_registrations,t.students_registrations.approved=s.data.approved,t.students_registrations.unapproved=s.data.unapproved,t.students_registrations.approval_percentage=s.data.approved/(s.data.approved+s.data.unapproved)*100}))}}},i=a(0),o=Object(i.a)(n,(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-xl-12 order-xl-1"},[a("div",{staticClass:"card bg-secondary shadow"},[a("div",{staticClass:"card-header bg-white border-0"},[a("h3",[a("i",{staticClass:"ni ni-single-02"}),t._v(" "),t.$parent.term_class.course?a("router-link",{attrs:{to:{name:"ac.classes.show",params:{id:t.$parent.term_class.id}}}},[t._v("\n                            "+t._s(t.$parent.term_class.course.name)+"\n                        ")]):t._e(),t._v("\n                        Registered Students\n                        "),a("div",{staticClass:"float-right"},[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(s){return t.$parent.$router.back()}}},[a("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                            ")])])],1),t._v(" "),a("div",{staticClass:"progress-wrapper"},[a("div",{staticClass:"progress-info"},[t._m(0),t._v(" "),a("div",{staticClass:"progress-percentage"},[a("span",[t._v(t._s(t.students_registrations.approved)+"/"+t._s(t.students_registrations.approved+t.students_registrations.unapproved))])])]),t._v(" "),a("div",{staticClass:"progress"},[a("div",{staticClass:"progress-bar bg-default",style:{width:t.students_registrations.approval_percentage+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.students_registrations.approval_percentage}})])])]),t._v(" "),a("div",{staticClass:"card-body"},[a("table",{staticClass:"table"},[t._m(1),t._v(" "),a("tbody",t._l(t.students_registrations.data,(function(s){return a("tr",[a("th",[a("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(a){return t.view_student(s)}}},[a("i",{staticClass:"ni ni-bold-right"})])]),t._v(" "),a("td",[t._v(t._s(s.profile.user.num))]),t._v(" "),a("td",[t._v(t._s(t.$root.full_name(s.profile.user)))]),t._v(" "),a("td",[t._v(t._s(s.profile.user.email))]),t._v(" "),a("td",[a("div",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ac-4"),expression:"$store.state.auth.hasRole('ac-4')"}],staticClass:"dbtn-group"},[a("a",{staticClass:"btn btn-sm dropdown-toggle",class:[s.approved_by_profile_id?"btn-outline-danger":"btn-outline-success"],attrs:{href:"#",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"ni",class:[s.approved_by_profile_id?"ni-fat-remove":"ni-fat-add"]})]),t._v(" "),a("div",{staticClass:"dropdown-menu dropdown-menu-right"},[s.approved_by_profile_id?a("button",{staticClass:"dropdown-item",on:{click:function(a){return t.approval(s)}}},[t._v("Cancel")]):a("button",{staticClass:"dropdown-item",on:{click:function(a){return t.approval(s)}}},[t._v("Approve")])])])])])})),0)]),t._v(" "),a("laravel-vue-pagination",{attrs:{limit:5,data:t.students_registrations,align:"center"},on:{"pagination-change-page":t.get_students}})],1)])]),t._v(" "),a("modal",{attrs:{scrollable:!0,name:"view-modal",height:"auto"}},[t.registration?a("div",{staticClass:"modal modal-content"},[a("div",{staticClass:"modal-body"},[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("th",{staticClass:"text-center bg-light",attrs:{colspan:"2"}},[t._v("\n                                Students Info\n                            ")])]),t._v(" "),a("tr",[a("td",[t._v("MAT #")]),t._v(" "),a("th",[t._v(t._s(t.registration.profile.user.num))])]),t._v(" "),a("tr",[a("td",[t._v("Name")]),t._v(" "),a("th",[t._v(t._s(t.$root.full_name(t.registration.profile.user)))])]),t._v(" "),a("tr",[a("td",[t._v("Email")]),t._v(" "),a("th",[t._v(t._s(t.registration.profile.user.email))])]),t._v(" "),a("tr",[a("td",[t._v("Tel #")]),t._v(" "),a("th",[t._v(t._s(t.registration.profile.user.tel))])])]),t._v(" "),t.registration.grades?a("tbody",[a("tr",[a("th",{staticClass:"text-center bg-light",attrs:{colspan:"2"}},[t._v("\n                                    Assessments\n                                ")])]),t._v(" "),t._l(t.registration.grades.term_class.assessments,(function(s){return a("tr",[a("td",[t._v(t._s(s.name))]),t._v(" "),a("th",[null==t.registration.grades.scores[s.id]?a("span",{staticClass:"text-danger"},[t._v("\n                                    Not Entered\n                                ")]):a("span",{staticClass:"text-underline"},[t._v("\n                                    "+t._s(t.registration.grades.scores[s.id])+" / "+t._s(s.score)+"\n                                ")])])])})),t._v(" "),a("tr",{staticClass:"bg-danger"},[a("td",[t._v("Total")]),t._v(" "),a("th",{staticClass:"text-underline"},[t._v("\n                                    "+t._s(t.registration.grades.score)+" / "+t._s(t.registration.grades.total)+"\n                                ")])])],2):t._e()])])]):t._e()]),t._v(" "),a("modal",{attrs:{scrollable:!0,name:"approval",height:"auto"}},[t.sr?a("div",{staticClass:"modal-body"},[a("h2",[a("small",[t._v("#")]),t._v(t._s(t.sr.profile.user.num))]),t._v(" "),a("h1",[t._v(t._s(t.$root.full_name(t.sr.profile.user)))]),t._v(" "),a("h2",[t._v(t._s(t.sr.profile.user.email))]),t._v(" "),a("hr"),t._v(" "),t.sr.approved_by_profile_id?a("div",[a("h1",{staticClass:"text-danger"},[t._v("Cancel Approval")]),t._v(" "),a("form",{on:{submit:t.submitForm}},[a("fake-form-input"),t._v(" "),a("button",{staticClass:"btn btn-danger btn-block",attrs:{type:"submit"}},[t._v("Cancel")])],1)]):a("div",[a("form",{on:{submit:t.submitForm}},[a("fake-form-input"),t._v(" "),a("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"submit"}},[t._v("Approve Class Registration")])],1)])]):t._e()])],1)}),[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"progress-label"},[s("span",[this._v("Approvals")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th"),this._v(" "),s("th",[this._v("#")]),this._v(" "),s("th",[this._v("Student")]),this._v(" "),s("th",[this._v("Email")]),this._v(" "),s("th")])])}],!1,null,"db31bf4e",null);s.default=o.exports}}]);