(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{110:function(t,s,e){"use strict";e.r(s);var a={name:"IndexClasses",props:["class_registrations"],data:function(){return{terms:{}}},methods:{}},n=e(0),r=Object(n.a)(a,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-xl-12 order-xl-1"},[e("div",{staticClass:"card bg-secondary shadow"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body"},[e("table",{staticClass:"table"},[t._m(1),t._v(" "),e("tbody",t._l(t.class_registrations.data,(function(s){return e("tr",[e("td",[e("router-link",{staticClass:"btn btn-sm btn-primary",attrs:{to:{name:"s.classes",params:{id:s.term_class_id}}}},[e("i",{staticClass:"ni ni-button-play"})])],1),t._v(" "),e("td",[t._v(t._s(s.term_class.course.name))]),t._v(" "),e("td",[t._v(t._s(s.term_class.venue.name))]),t._v(" "),e("td",t._l(s.term_class.times,(function(s){return e("li",[t._v("\n                                    "+t._s(s.day)+", "+t._s(t.$root.moment(s.time))+"\n                                ")])})),0)])})),0)]),t._v(" "),e("laravel-vue-pagination",{attrs:{limit:5,data:t.$parent.class_registrations,align:"center"},on:{"pagination-change-page":t.$parent.get_class_registrations}})],1)])])])}),[function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"card-header bg-white border-0"},[s("div",{staticClass:"row align-items-center"},[s("div",{staticClass:"col-8"},[s("h3",{staticClass:"mb-0"},[this._v("Registered Classes")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("thead",[s("tr",[s("th"),this._v(" "),s("th",[this._v("Course")]),this._v(" "),s("th",[this._v("Venue")]),this._v(" "),s("th",[this._v("Times")])])])}],!1,null,"565d7415",null).exports;function i(t,s){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=function(t,s){if(!t)return;if("string"==typeof t)return l(t,s);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return l(t,s)}(t))||s&&t&&"number"==typeof t.length){e&&(t=e);var a=0,n=function(){};return{s:n,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,o=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return i=t.done,t},e:function(t){o=!0,r=t},f:function(){try{i||null==e.return||e.return()}finally{if(o)throw r}}}}function l(t,s){(null==s||s>t.length)&&(s=t.length);for(var e=0,a=new Array(s);e<s;e++)a[e]=t[e];return a}var o={name:"ViewClasses",data:function(){return{form:{input:{search:""}},info:{title:""},lecturers:{},grades:null,errors:null,assessment:null,files:null}},methods:{view_files:function(){this.get_files(),this.$modal.show("files")},get_files:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/students/classes/"+this.$route.params.id+"/files?page="+s).then((function(s){t.files=s.data.files}))},view_grades:function(){var t=this;this.info.title="Assessments & Grades",axios.get("/students/classes/"+this.$route.params.id+"/grades").then((function(s){t.grades=s.data.grades,t.grades.score=0,t.grades.total=0;var e,a=i(t.grades.term_class.assessments);try{for(a.s();!(e=a.n()).done;){var n=e.value;t.grades.score+=parseFloat(t.grades.scores[n.id]),t.grades.total+=parseFloat(n.score)}}catch(t){a.e(t)}finally{a.f()}t.$modal.show("info")}))},unregister:function(){var t=this;axios.post("/students/unregister",{class:this.$parent.term_class.id}).then((function(s){t.$root.post_success(s.data.success),t.$router.back()}))}}},c={name:"Classes",components:{ViewClasses:Object(n.a)(o,(function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"container-fluid"},[e("div",{staticClass:"header-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"card card-stats mb-4 mb-xl-0"},[e("div",{staticClass:"card-body"},[e("button",{staticClass:"btn btn-link btn-sm",on:{click:t.view_grades}},[e("i",{staticClass:"ni ni-bullet-list-67"}),t._v(" Assessments & Grades\n                        ")]),t._v(" "),e("button",{staticClass:"btn btn-link btn-sm",on:{click:t.view_files}},[e("i",{staticClass:"ni ni-folder-17"}),t._v(" Uploaded Resources\n                        ")]),t._v(" "),e("router-link",{staticClass:"btn btn-link btn-sm",attrs:{to:{name:"s.mails",params:{id:t.$parent.term_class.id}}}},[e("i",{staticClass:"ni ni-email-83"}),t._v(" Mails\n                        ")]),t._v(" "),e("div",{staticClass:"float-right"},[t.$root.not_expired(t.$parent.term_class.term.unregistration_deadline)?e("button",{staticClass:"btn btn-link btn-sm text-danger",on:{click:function(s){return t.$modal.show("registration")}}},[t._v("\n                                Un-Register\n                            ")]):t._e()]),t._v(" "),e("modal",{attrs:{scrollable:!0,name:"registration",height:"auto",draggable:!0}},[e("div",{staticClass:"modal modal-content"},[e("h3",{staticClass:"modal-header"},[t._v("\n                                    Are you shore you want to unregistered to the course\n                                    "),e("span",{staticClass:"text-underline"},[t._v(t._s(t.$parent.term_class.course.name))]),t._v("?\n                                ")]),t._v(" "),e("div",{staticClass:"modal-body"},[t.$root.not_expired(t.$parent.term_class.term.unregistration_deadline)?e("button",{staticClass:"btn btn-danger btn-block",on:{click:t.unregister}},[t._v("\n                                        Un-Register")]):t._e()])])]),t._v(" "),e("modal",{attrs:{scrollable:!0,name:"files",height:"auto",draggable:!0}},[t.files?e("div",{staticClass:"modal modal-content"},[e("h3",{staticClass:"modal-header"},[e("i",{staticClass:"ni ni-books"},[t._v("\n                                        Uploaded Resources\n                                    ")])]),t._v(" "),e("table",{staticClass:"table modal-body"},[e("tbody",[t._l(t.files.data,(function(s){return e("tr",[e("td",[e("a",{staticClass:"font-weight-bold text-underline",attrs:{href:"/storage/"+s.url,target:"_blank"}},[t._v("\n                                                "+t._s(s.name)+"\n                                            ")]),t._v(" "),e("span",[e("span",{staticClass:"badge"},[e("i",{staticClass:"ni ni-chart-pie-35"}),t._v(" "+t._s(t.$root.file_size(s.size)))]),t._v(" "),e("span",{staticClass:"badge"},[e("i",{staticClass:"ni ni-single-02"}),t._v(" "+t._s(t.$root.full_name(s.profile.user)))])])])])})),t._v(" "),e("tr",[e("td")])],2)]),t._v(" "),e("laravel-vue-pagination",{attrs:{limit:5,data:t.files,align:"center"},on:{"pagination-change-page":t.get_files}})],1):t._e()]),t._v(" "),e("modal",{attrs:{scrollable:!0,name:"info",height:"auto",draggable:!0}},[e("div",{staticClass:"modal modal-content"},[e("h3",{staticClass:"modal-header"},[t._v(t._s(t.info.title))]),t._v(" "),e("div",{staticClass:"modal-body"},[t.assessment?e("div",[e("a",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(s){t.assessment=null}}},[e("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                                        ")]),t._v(" "),e("table",{staticClass:"table"},[e("tr",[e("td",[e("h3",[t._v(t._s(t.assessment.name))]),t._v(" "),e("h5",[e("li",[e("small",[t._v("Starting At: ")]),t._v(t._s(t.$root.moment(t.assessment.starting_at)))]),t._v(" "),e("li",[e("small",[t._v("Ending At: ")]),t._v(t._s(t.$root.moment(t.assessment.ending_at)))])]),t._v(" "),e("h5",[t._v("\n                                                        Score: "+t._s(t.assessment.score)+" / 100\n                                                    ")]),t._v("\n                                                    "+t._s(t.assessment.info)+"\n                                                ")])]),t._v(" "),e("tr",[e("th",[t._v("\n                                                    Grade\n                                                    "),e("h5",[null==t.grades.scores[t.assessment.id]?e("span",{staticClass:"text-danger"},[t._v("\n                                                        Not Entered\n                                                    ")]):e("span",{staticClass:"text-underline"},[t._v("\n                                                        "+t._s(t.grades.scores[t.assessment.id])+" / "+t._s(t.assessment.score)+"\n                                                    ")])])])])])]):t.grades?e("div",[e("table",{staticClass:"table"},[e("tr",[e("th"),t._v(" "),e("th",[t._v("Assessment")]),t._v(" "),e("th",[t._v("Grade")])]),t._v(" "),t._l(t.grades.term_class.assessments,(function(s){return e("tr",[e("td",[e("a",{staticClass:"btn btn-sm btn-light",on:{click:function(e){t.assessment=s}}},[e("i",{staticClass:"ni ni-bold-right"})])]),t._v(" "),e("td",[t._v("\n                                                    "+t._s(s.name)+"\n                                                ")]),t._v(" "),e("th",[null==t.grades.scores[s.id]?e("span",{staticClass:"text-danger"},[t._v("\n                                                        Not Entered\n                                                    ")]):e("span",{staticClass:"text-underline"},[t._v("\n                                                        "+t._s(t.grades.scores[s.id])+" / "+t._s(s.score)+"\n                                                    ")])])])})),t._v(" "),e("tr",{staticClass:"bg-light"},[e("td",{attrs:{colspan:"2"}},[t._v("Total")]),t._v(" "),e("th",{staticClass:"text-underline"},[t._v("\n                                                    "+t._s(t.grades.score)+" / "+t._s(t.grades.total)+"\n                                                ")])])],2)]):t._e()])])]),t._v(" "),e("table",{staticClass:"table"},[e("tr",[e("td",[e("h6",[t._v("Course")]),t._v("\n                                    "+t._s(t.$parent.term_class.course.code+" - "+t.$parent.term_class.course.name)+"\n                                ")])]),t._v(" "),e("tr",[e("td",[e("h6",[t._v("Academic Term")]),t._v("\n                                    "+t._s(t.$parent.term_class.term.name)),e("br"),t._v(" "),e("small",[t._v("Start Date:")]),t._v(" "+t._s(t.$root.format_date(t.$parent.term_class.term.starting_at))),e("br"),t._v(" "),e("small",[t._v("End Date:")]),t._v(" "+t._s(t.$root.format_date(t.$parent.term_class.term.ending_at))+"\n                                ")])]),t._v(" "),e("tr",[e("td",[e("h6",[t._v("Venue")]),t._v("\n                                    "+t._s(t.$parent.term_class.venue.name+", "+t.$parent.term_class.venue.description)+"\n                                ")])]),t._v(" "),e("tr",[e("td",[e("h6",[t._v("Lecturers")]),t._v(" "),e("ul",t._l(t.$parent.term_class.class_lecturers,(function(s){return e("li",{},[t._v("\n                                            "+t._s(t.$root.full_name(s.profile.user))+"\n                                        ")])})),0)])])])],1)])])])])])}),[],!1,null,"1a845fb9",null).exports,IndexClasses:r},data:function(){return{term_class:null,class_registrations:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){this.$route.params.id?this.get_term_class():this.get_class_registrations()},get_term_class:function(){var t=this;axios.get("/students/classes/"+this.$route.params.id).then((function(s){t.term_class=s.data.term_class,t.class_registrations=null}))},get_class_registrations:function(){var t=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/students/classes?page="+s).then((function(s){t.class_registrations=s.data.class_registrations,t.term_class=null}))}}},_=Object(n.a)(c,(function(){var t=this.$createElement,s=this._self._c||t;return s("div",[this.term_class?s("ViewClasses"):this._e(),this._v(" "),this.class_registrations?s("IndexClasses",{attrs:{class_registrations:this.class_registrations}}):this._e()],1)}),[],!1,null,"1cf39422",null);s.default=_.exports}}]);