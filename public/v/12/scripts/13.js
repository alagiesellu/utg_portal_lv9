(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{130:function(t,e,s){"use strict";s.r(e);var a=s(60),r=s.n(a);s(81);function i(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return n(t,e)}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,l=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return o=t.done,t},e:function(t){l=!0,i=t},f:function(){try{o||null==s.return||s.return()}finally{if(l)throw i}}}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}var o={name:"FilesClasses",components:{vueDropzone:r.a},data:function(){return{file_storage:0,max_file_storage:window.options.file_storage,files:{},dropzoneOptions:{url:window.api_url+"/academic/classes/uploads/"+this.$route.params.id,headers:{Accept:"application/json",Authorization:"Bearer "+window.Save.get("token")},chunking:!1,acceptedFiles:"image/*,.pdf,.doc,.docx,.odt,.pdf,.xls,.xlsx,.ods,.ppt,.pptx,.txt",thumbnailWidth:150,maxFilesize:50}}},created:function(){this.fetchData(),this.$parent.fetchData()},watch:{$route:"fetchData"},methods:{remove_file:function(t){var e=this;axios.post("/academic/classes/files/"+t.id+"/delete").then((function(t){e.$root.post_success(t.data.success),e.load_data(t.data.files)}))},dropzoneComplete:function(t,e){e.errors?this.$root.post_errors(e.errors):(this.load_data(e.files),this.$root.post_success(e.success))},fetchData:function(){this.get_files()},get_files:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/academic/classes/"+this.$route.params.id+"/files?page="+e).then((function(e){t.load_data(e.data.files)}))},load_data:function(t){this.file_storage=0,this.files=t;var e,s=i(this.files);try{for(s.s();!(e=s.n()).done;){var a=e.value;this.file_storage+=a.size}}catch(t){s.e(t)}finally{s.f()}this.file_storage=(this.file_storage/1048576).toFixed(2)}}},l=s(0),c=Object(l.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-12 order-xl-1"},[s("div",{staticClass:"card bg-secondary shadow"},[s("div",{staticClass:"card-header bg-white border-0"},[s("h3",[s("i",{staticClass:"ni ni-folder-17"}),t._v(" "),t.$parent.term_class.course?s("router-link",{attrs:{to:{name:"ac.classes.show",params:{id:t.$parent.term_class.id}}}},[t._v("\n                        "+t._s(t.$parent.term_class.course.name)+"\n                    ")]):t._e(),t._v("\n                    Uploaded Files\n                    "),s("div",{staticClass:"float-right"},[s("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(e){return t.$parent.$router.back()}}},[s("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                        ")])])],1),t._v(" "),s("div",{staticClass:"progress-wrapper"},[s("div",{staticClass:"progress-info"},[t._m(0),t._v(" "),s("div",{staticClass:"progress-percentage"},[s("small",[t._v("Used "+t._s(t.file_storage)+" MB out of "+t._s(t.max_file_storage)+" MB")])])]),t._v(" "),s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar bg-default",style:{width:t.file_storage/t.max_file_storage*100+"%"},attrs:{role:"progressbar","aria-valuemin":"0","aria-valuemax":"100","aria-valuenow":t.file_storage/t.max_file_storage*100}})])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("vue-dropzone",{ref:"dropzone",attrs:{id:"dropzone",options:t.dropzoneOptions,duplicateCheck:!0},on:{"vdropzone-success":t.dropzoneComplete}}),t._v(" "),s("table",{staticClass:"table"},[t._m(1),t._v(" "),s("tbody",t._l(t.files,(function(e){return s("tr",[s("td",[s("a",{staticClass:"font-weight-bold text-underline",attrs:{href:"/storage/"+e.url,target:"_blank"}},[t._v("\n                                "+t._s(e.name)+"\n                            ")]),t._v(" "),s("span",[s("span",{staticClass:"badge"},[s("i",{staticClass:"ni ni-chart-pie-35"}),t._v(" "+t._s(t.$root.file_size(e.size)))]),t._v(" "),s("span",{staticClass:"badge"},[s("i",{staticClass:"ni ni-single-02"}),t._v(" "+t._s(t.$root.full_name(e.profile.user)))]),t._v(" "),s("button",{staticClass:"btn btn-sm btn-link text-danger",on:{click:function(s){return t.remove_file(e)}}},[t._v("\n                                    Remove\n                                ")])])])])})),0)])],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"progress-label"},[e("span",[this._v("Storage Capacity")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("Files")])])])}],!1,null,"aa096e1c",null);e.default=c.exports}}]);