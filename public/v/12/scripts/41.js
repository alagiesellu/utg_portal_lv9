(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{111:function(t,e,s){"use strict";s.r(e);var a={name:"IndexClasses",data:function(){return{}},methods:{}},r=s(0);function n(t,e){var s="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!s){if(Array.isArray(t)||(s=function(t,e){if(!t)return;if("string"==typeof t)return i(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);"Object"===s&&t.constructor&&(s=t.constructor.name);if("Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return i(t,e)}(t))||e&&t&&"number"==typeof t.length){s&&(t=s);var a=0,r=function(){};return{s:r,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,o=!0,l=!1;return{s:function(){s=s.call(t)},n:function(){var t=s.next();return o=t.done,t},e:function(t){l=!0,n=t},f:function(){try{o||null==s.return||s.return()}finally{if(l)throw n}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var s=0,a=new Array(e);s<e;s++)a[s]=t[s];return a}var o={name:"ViewTimetable",data:function(){return{term_class:null,term_classes:[],term_classes_pag:[],pagination:{counter:0,buttons:[]},window:window,search:"",pc:10}},mounted:function(){this.term_classes=Array(this.$parent.term_classes.length),this.searchTC()},methods:{gen_buttons:function(){this.pagination.buttons=[];for(var t=0;t<this.term_classes.length/this.pc;t++)this.pagination.buttons.push({id:t})},paginateTC:function(t){var e,s=n(this.pagination.buttons);try{for(s.s();!(e=s.n()).done;){var a=e.value;a.active=a.id===t}}catch(t){s.e(t)}finally{s.f()}this.term_classes_pag=this.term_classes.slice(t*this.pc,t*this.pc+this.pc),this.pagination.counter=t},searchTC:function(){this.term_classes=[];var t,e=n(this.$parent.term_classes);try{for(e.s();!(t=e.n()).done;){var s=t.value;-1!==(s.course.code+" "+s.course.name).toLowerCase().indexOf(this.search)&&this.term_classes.push(s)}}catch(t){e.e(t)}finally{e.f()}this.gen_buttons(),this.paginateTC(0)},searchClass:function(t){t.preventDefault(),this.searchTC()},reg_post_request:function(t){var e=this;axios.post(t,{class:this.term_class.id}).then((function(t){e.$root.post_success(t.data.success),e.$modal.hide("view_class"),e.$modal.hide("registration")}))},unregister:function(){this.reg_post_request("/students/unregister")},register:function(){this.reg_post_request("/students/register")},viewClass:function(t){var e=this;axios.get("/students/classes/"+t.id).then((function(t){for(var s in e.term_class=t.data.term_class,e.term_class.taken=e.term_class.class_registrations.length,e.term_class.user=t.data.user,e.term_class.have_registered=!1,t.data.user.registrations)t.data.user.registrations[s].term_class_id===e.term_class.id&&(e.term_class.have_registered=!0);e.$modal.show("view_class")})).catch((function(t){e.$root.post_errors(t)}))}}},l={name:"Timetable",components:{IndexTimetable:Object(r.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[0===t.$parent.terms.total?s("div",{staticClass:"card bg-default col-12"},[t._m(0)]):t._e(),t._v(" "),t._l(t.$parent.terms.data,(function(e){return s("div",{staticClass:"card bg-secondary shadow col-12"},[s("div",{staticClass:"card-header bg-white border-0"},[s("h1",[s("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(s){return t.$parent.$router.push({name:"s.timetables",params:{term:e.id}})}}},[s("i",{staticClass:"ni ni-button-play"})]),t._v("\n                "+t._s(e.name)+"\n            ")]),t._v(" "),s("h3",{staticClass:"blockquote-footer"},[s("small",[t._v("Start Date:")]),t._v(" "+t._s(t.$root.format_date(e.starting_at))+"\n            ")]),t._v(" "),s("h3",{staticClass:"blockquote-footer"},[s("small",[t._v("End Date:")]),t._v(" "+t._s(t.$root.format_date(e.ending_at))+"\n            ")]),t._v(" "),e.registration_deadline?s("h3",{staticClass:"blockquote-footer"},[s("small",[t._v("Registration Deadline:")]),t._v(" "+t._s(t.$root.format_date(e.registration_deadline))+"\n            ")]):t._e(),t._v(" "),e.unregistration_deadline?s("h3",{staticClass:"blockquote-footer"},[s("small",[t._v("Un-Registration Deadline:")]),t._v(" "+t._s(t.$root.format_date(e.unregistration_deadline))+"\n            ")]):t._e()])])})),t._v(" "),s("div",{staticClass:"card col-12 align-items-center"},[s("laravel-vue-pagination",{attrs:{limit:5,data:t.$parent.terms,align:"center"},on:{"pagination-change-page":t.$parent.get_terms}})],1)],2)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"card-header bg-white border-0"},[e("h1",[this._v("No Running Academic Term")])])}],!1,null,"30ef32b5",null).exports,ViewTimetable:Object(r.a)(o,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[s("div",{staticClass:"col-xl-12 order-xl-1"},[s("div",{staticClass:"card bg-secondary shadow"},[s("div",{staticClass:"card-header bg-white border-0"},[s("div",{staticClass:"row"},[s("h2",{staticClass:"col-md-6"},[s("small",{staticClass:"text-underline"},[t._v("Academic Term")]),s("br"),t._v("\n                        "+t._s(t.$parent.term.name)+"\n                    ")]),t._v(" "),s("div",{staticClass:"col-md-6"},[s("h4",{staticClass:"blockquote-footer"},[s("small",[t._v("Start Date:")]),t._v(" "+t._s(t.$root.format_date(t.$parent.term.starting_at))+"\n                        ")]),t._v(" "),s("h4",{staticClass:"blockquote-footer"},[s("small",[t._v("End Date:")]),t._v(" "+t._s(t.$root.format_date(t.$parent.term.ending_at))+"\n                        ")]),t._v(" "),t.$parent.term.registration_deadline?s("h4",{staticClass:"blockquote-footer"},[s("small",[t._v("Registration Deadline:")]),t._v(" "+t._s(t.$root.format_date(t.$parent.term.registration_deadline))+"\n                        ")]):t._e(),t._v(" "),t.$parent.term.unregistration_deadline?s("h4",{staticClass:"blockquote-footer"},[s("small",[t._v("Un-Registration Deadline:")]),t._v(" "+t._s(t.$root.format_date(t.$parent.term.unregistration_deadline))+"\n                        ")]):t._e()])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-md-12"},[s("form",{staticClass:"form-group",on:{submit:t.searchClass}},[s("div",{staticClass:"input-group mb-4"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{placeholder:"Search by course code or name",type:"text"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),t._v(" "),t._m(1)])])])]),t._v(" "),s("table",{staticClass:"table"},[t._m(2),t._v(" "),s("tbody",{ref:"search_table"},t._l(t.term_classes_pag,(function(e){return s("tr",[s("td",[s("button",{staticClass:"btn btn-sm btn-primary",on:{click:function(s){return t.viewClass(e)}}},[s("i",{staticClass:"ni ni-button-play"})])]),t._v(" "),s("td",[t._v(t._s(e.course.code+" - "+e.course.name))]),t._v(" "),s("td",[t._v("\n                            "+t._s(e.venue.name)),s("br"),t._v(" "),s("small",[t._v(t._s(e.venue.description))])]),t._v(" "),s("td",t._l(e.times,(function(e){return s("li",[t._v("\n                                "+t._s(e.day)+", "+t._s(t.$root.moment(e.time))+"\n                            ")])})),0)])})),0)]),t._v(" "),s("nav",{attrs:{"aria-label":"Page navigation example"}},[s("ul",{staticClass:"pagination justify-content-center"},t._l(t.pagination.buttons,(function(e){return s("li",{staticClass:"page-item",class:[e.active?"active":""]},[s("button",{staticClass:"page-link",on:{click:function(s){return t.paginateTC(e.id)}}},[t._v(t._s(e.id+1))])])})),0)])])])]),t._v(" "),s("modal",{attrs:{scrollable:!0,name:"view_class",height:"auto",draggable:!0}},[s("div",{staticClass:"modal modal-content"},[s("h2",{staticClass:"modal-header"},[t._v("Class")]),t._v(" "),t.term_class?s("div",{staticClass:"modal-body"},[s("table",{staticClass:"table",attrs:{id:"data-table"}},[s("tbody",[s("tr",[s("td",[t._v("Course")]),t._v(" "),s("th",[t._v("\n                            "+t._s(t.term_class.course.code+" - "+t.term_class.course.name)+"\n                            "),s("span",{staticClass:"blockquote-footer"},[t._v("\n                                Credit Hours:\n                                "),s("strong",[t._v(t._s(t.term_class.course.credit_hours))])])])]),t._v(" "),s("tr",[s("td",[t._v("Venue")]),t._v(" "),s("th",[t._v(t._s(t.term_class.venue.name+" - "+t.term_class.venue.address))])]),t._v(" "),s("tr",[s("td",[t._v("Days")]),t._v(" "),s("th",t._l(t.term_class.times,(function(e){return s("li",[t._v("\n                                "+t._s(e.day)+", "+t._s(t.$root.moment(e.time))+"\n                            ")])})),0)]),t._v(" "),s("tr",[s("td",[t._v("Lecturers")]),t._v(" "),s("th",t._l(t.term_class.class_lecturers,(function(e){return s("li",[t._v("\n                                "+t._s(t.$root.full_name(e.profile.user))+"\n                                "),s("span",{staticClass:"blockquote-footer"},[t._v("Email: "+t._s(e.profile.user.email))])])})),0)]),t._v(" "),s("tr",[s("td",[t._v("Class Size")]),t._v(" "),s("th",[t._v("\n                            "+t._s(t.term_class.taken)+" "),s("small",[t._v("taken")]),t._v("\n                            +\n                            "+t._s(t.term_class.size-t.term_class.taken)+" "),s("small",[t._v("available")]),t._v("\n                            /\n                            "),s("small",[t._v("total")]),t._v(" "+t._s(t.term_class.size)+"\n                            "),t.term_class.size<=t.term_class.taken?s("span",{staticClass:"blockquote-footer text-danger"},[t._v("Class Full")]):t._e(),t._v(" "),s("div",{staticClass:"progress"},[s("div",{staticClass:"progress-bar bg-danger",style:"width: "+t.term_class.taken/t.term_class.size*100+"%;",attrs:{role:"progressbar","aria-valuenow":t.term_class.taken,"aria-valuemin":"0","aria-valuemax":t.term_class.size}})])])])])]),t._v(" "),t.term_class.have_registered?s("div",[t.$root.not_expired(t.term_class.term.unregistration_deadline)?s("button",{staticClass:"btn btn-danger btn-block",on:{click:function(e){return t.$modal.show("registration")}}},[t._v("Un-Register")]):t._e()]):s("div",[t.term_class.user.can_reg.value&&t.term_class.user.registrations.length<t.window.options.max_class_registration?s("div",[t.$root.not_expired(t.term_class.term.registration_deadline)?s("button",{staticClass:"btn btn-primary btn-block",on:{click:function(e){return t.$modal.show("registration")}}},[t._v("Register")]):t._e()]):s("div",[s("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[s("h4",{staticClass:"alert-heading"},[t._v("Cannot Register")]),t._v(" "),t.term_class.user.registrations.length>=t.window.options.max_class_registration?s("h5",{staticClass:"blockquote-footer text-white"},[t._v("\n                                Registered Maximum Number of courses of "),s("strong",[t._v(t._s(t.window.options.max_class_registration))])]):t._e(),t._v(" "),t.term_class.user.can_reg.value?t._e():s("span",t._l(t.term_class.user.can_reg.reasons,(function(e){return s("h5",t._l(e,(function(e){return s("span",{staticClass:"blockquote-footer text-white"},[t._v("\n                                       "+t._s(e)+"\n                                   ")])})),0)})),0)])])])]):t._e()])]),t._v(" "),t.term_class?s("modal",{attrs:{name:"registration",height:"auto",draggable:!0}},[s("div",{staticClass:"modal modal-content"},[s("div",{staticClass:"modal-header"},[s("h1",{staticClass:"text-underline"},[t._v(t._s(t.term_class.course.name))])]),t._v(" "),s("div",{staticClass:"modal-body"},[t.term_class.have_registered?s("button",{staticClass:"btn btn-danger btn-block",on:{click:t.unregister}},[t._v("Un-Register")]):s("button",{staticClass:"btn btn-success btn-block",on:{click:t.register}},[t._v("Register")])])])]):t._e()],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-zoom-split-in"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("input",{staticClass:"input-group-text btn btn-primary shadow-none",attrs:{type:"submit",value:"search"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th"),this._v(" "),e("th",[this._v("Course")]),this._v(" "),e("th",[this._v("Venue")]),this._v(" "),e("th",[this._v("Times")])])])}],!1,null,"ad08b08a",null).exports},data:function(){return{term_classes:null,term_class:null,term:null,terms:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){this.$route.params.term?this.get_term():this.get_terms()},get_term:function(){var t=this;axios.get("/students/terms/"+this.$route.params.term).then((function(e){t.term=e.data.term,t.terms=null,t.get_term_classes()})).catch((function(e){t.$root.post_errors(e)}))},get_terms:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/students/terms?page="+e).then((function(e){t.terms=e.data.terms,t.term=null,t.term_classes=null})).catch((function(e){t.$root.post_errors(e)}))},get_term_class:function(){var t=this;axios.get("/students/timetables/term/"+this.$route.params.term).then((function(e){t.term_class=e.data.term_class,t.term_classes=null}))},get_term_classes:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;axios.get("/students/timetables/"+this.term.id+"?page="+e).then((function(e){t.term_classes=e.data.term_classes}))}}},c=Object(r.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[this.term&&this.term_classes?e("ViewTimetable"):this._e(),this._v(" "),null!=this.terms?e("IndexTimetable"):this._e()],1)}),[],!1,null,"b4785072",null);e.default=c.exports}}]);