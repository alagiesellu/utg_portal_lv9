(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{102:function(t,e,s){"use strict";s.r(e);var a={name:"IndexCourses"},r=s(0),i=Object(r.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("h3",{staticClass:"mb-0"},[s("div",{staticClass:"float-right"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-12"),expression:"$store.state.auth.hasRole('ad-12')"}],staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"ad.courses",params:{ops:"create"}}}},[t._v("\n                        Add New Course\n                    ")])],1)])]),t._v(" "),s("form",{staticClass:"col-md-12",on:{submit:t.$parent.submitCourseSearch}},[s("div",{staticClass:"form-group"},[s("div",{staticClass:"input-group mb-4"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.filter.search,expression:"$parent.filter.search"}],staticClass:"form-control",attrs:{placeholder:"Search by course code or name...",type:"text"},domProps:{value:t.$parent.filter.search},on:{input:function(e){e.target.composing||t.$set(t.$parent.filter,"search",e.target.value)}}}),t._v(" "),t._m(0)])])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[t._m(1),t._v(" "),s("tbody",t._l(t.$parent.courses.data,(function(e){return s("tr",[s("td",[s("router-link",{staticClass:"btn btn-primary btn-sm",attrs:{to:{name:"ad.courses",params:{id:e.id}}}},[s("i",{staticClass:"ni ni-bold-right"})])],1),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.code))]),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.name))]),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.department.name))])])})),0)]),t._v(" "),s("laravel-vue-pagination",{attrs:{limit:5,data:t.$parent.courses,align:"center"},on:{"pagination-change-page":t.$parent.get_courses}})],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e("i",{staticClass:"ni ni-zoom-split-in"}),this._v("\n                            Search\n                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th"),this._v(" "),e("th",[this._v("Code")]),this._v(" "),e("th",[this._v("Name")]),this._v(" "),e("th",[this._v("Department")])])])}],!1,null,"4d6f0477",null).exports,n={name:"ViewCourses"},o=Object(r.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0",attrs:{id:"view"}},[s("div",{staticClass:"card-header bg-transparent"},[s("h3",{staticClass:"mb-0"},[s("div",{staticClass:"float-left"},[s("router-link",{staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"ad.courses"}}},[s("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                    ")])],1),t._v(" "),s("div",{staticClass:"float-right"},[s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-12"),expression:"$store.state.auth.hasRole('ad-12')"}],staticClass:"btn btn-outline-warning btn-sm",attrs:{to:{name:"ad.courses",params:{id:t.$parent.course.id,ops:"edit"}}}},[t._v("\n                        Edit\n                    ")]),t._v(" "),s("router-link",{directives:[{name:"show",rawName:"v-show",value:t.$store.state.auth.hasRole("ad-12"),expression:"$store.state.auth.hasRole('ad-12')"}],staticClass:"btn btn-outline-danger btn-sm",attrs:{to:{name:"ad.courses",params:{id:t.$parent.course.id,ops:"delete"}}}},[t._v("\n                        Delete\n                    ")])],1)])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[s("tbody",[s("tr",[s("td",[t._v("Code")]),t._v(" "),s("th",[t._v(t._s(t.$parent.course.code))])]),t._v(" "),s("tr",[s("td",[t._v("Name")]),t._v(" "),s("th",[t._v(t._s(t.$parent.course.name))])]),t._v(" "),s("tr",[s("td",[t._v("Department")]),t._v(" "),s("th",[t._v(t._s(t.$parent.course.department.name))])]),t._v(" "),s("tr",[s("td",[t._v("Credit Hours")]),t._v(" "),s("th",[t._v(t._s(t.$parent.course.credit_hours))])])])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("small",{staticClass:"text-underline"},[t._v("Description")]),t._v(" "),s("p",[t._v(t._s(t.$parent.course.description))])])])])}),[],!1,null,"997a38ce",null).exports,u={name:"FormCourses"},c={components:{FormCourses:Object(r.a)(u,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("router-link",{staticClass:"btn btn-outline-primary btn-sm",attrs:{to:{name:"ad.courses"}}},[s("i",{staticClass:"ni ni-bold-left"}),t._v(" Back\n                ")]),t._v(" "),s("span",{domProps:{innerHTML:t._s(t.$parent.form.title)}})],1),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:t.$parent.submitForm}},[s("fake-form-input"),t._v(" "),void 0!==t.$parent.form.input.code?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.code,expression:"$parent.form.input.code"}],staticClass:"form-control",attrs:{placeholder:"Course Code",type:"text",required:""},domProps:{value:t.$parent.form.input.code},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"code",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.name?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(1),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.name,expression:"$parent.form.input.name"}],staticClass:"form-control",attrs:{placeholder:"Course Name",type:"text",required:""},domProps:{value:t.$parent.form.input.name},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"name",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.credit_hours?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(2),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.credit_hours,expression:"$parent.form.input.credit_hours"}],staticClass:"form-control",attrs:{placeholder:"Credit Hours",type:"number",min:"1",max:"500",required:""},domProps:{value:t.$parent.form.input.credit_hours},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"credit_hours",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.description?s("div",{staticClass:"form-group mb-3"},[s("label"),t._v(" "),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.description,expression:"$parent.form.input.description"}],staticClass:"form-control form-control-alternative",attrs:{required:"",rows:"4",placeholder:"Course description ..."},domProps:{value:t.$parent.form.input.description},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"description",e.target.value)}}})]):t._e(),t._v(" "),void 0!==t.$parent.form.input.department_id?s("div",{staticClass:"form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(3),t._v(" "),s("v-select",{staticClass:"form-control",attrs:{options:t.$parent.departments,reduce:function(t){return t.id},label:"name"},scopedSlots:t._u([{key:"search",fn:function(e){var a=e.attributes,r=e.events;return[s("input",t._g(t._b({staticClass:"vs__search",attrs:{required:!t.$parent.form.input.department_id}},"input",a,!1),r))]}}],null,!1,1535220183),model:{value:t.$parent.form.input.department_id,callback:function(e){t.$set(t.$parent.form.input,"department_id",e)},expression:"$parent.form.input.department_id"}})],1)]):t._e(),t._v(" "),t._m(4)],1)])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-align-left-2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-align-left-2"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-watch-time"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-building"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("Save changes")])])}],!1,null,"81238794",null).exports,ViewCourses:o,IndexCourses:i},name:"Courses",data:function(){return{courses:null,course:null,departments:[],filter:{search:null,search_q:""},form:{title:null,departments:[],input:{id:null,code:null,name:null,description:null,department_id:null,credit_hours:null},message:{errors:[],success:[]}}}},mounted:function(){this.$store.state.page="Courses"},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;"create"===this.$route.params.id||"create"===this.$route.params.ops?(this.get_schools_departments(),this.courses=null,this.form={title:"Create New Course",type:"c",input:{code:null,name:null,description:null,department_id:null,credit_hours:null}}):this.$route.params.id?(this.courses=null,axios.get("/admin/courses/"+this.$route.params.id).then((function(e){t.course=e.data.course,t.form=null,"edit"===t.$route.params.ops?(t.get_schools_departments(),t.form={title:"Edit Course "+t.course.name,type:"e",input:{id:t.course.id,name:t.course.name,code:t.course.code,description:t.course.description,department_id:t.course.department_id,credit_hours:t.course.credit_hours}}):"delete"===t.$route.params.ops&&(t.form={title:"Delete Course "+t.course.name,type:"d",input:{id:t.course.id}})}))):(this.course=this.form=null,this.get_courses())},submitForm:function(t){switch(t.preventDefault(),this.form.type){case"c":this.postRequest("/admin/courses/store");break;case"d":this.form.input.id=this.course.id,this.postRequest("/admin/courses/destroy");break;case"e":this.form.input.id=this.course.id,this.postRequest("/admin/courses/edit")}},postRequest:function(t){var e=this;axios.post(t,this.form.input).then((function(t){null!=t.data.course?e.$router.push({name:"ad.courses",params:{id:t.data.course.id}}):e.$router.push({name:"ad.courses"}),e.$root.post_success(t.data.success)}))},submitCourseSearch:function(t){t.preventDefault(),this.get_courses(1)},get_courses:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.filter.search&&(this.filter.search_q="&search="+this.filter.search),axios.get("/admin/courses?page="+e+this.filter.search_q).then((function(e){t.courses=e.data.courses}))},get_course:function(t){var e=this;axios.get("/admin/courses/"+t).then((function(t){e.course=t.data.course}))},get_schools_departments:function(){var t=this;axios.get("/admin/get/departments?is_major=0&is_admin=0").then((function(e){t.departments=e.data.departments}))}}},l=Object(r.a)(c,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"row"},[t.courses?s("IndexCourses"):t._e(),t._v(" "),t.course&&!t.form?s("ViewCourses"):t._e(),t._v(" "),t.form?s("FormCourses"):t._e()],1)}),[],!1,null,"1957cea4",null);e.default=l.exports}}]);