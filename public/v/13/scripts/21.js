(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{112:function(t,e,s){"use strict";s.r(e);var a={components:{FakeFormInputs:s(5).default},name:"FormClasses",data:function(){return{window:window,courses:{},major_term_classes:[],venues:{},errors:null,search:{course:"",venue:""},week_days:window.week_days,times:this.$parent.form.input.times}},mounted:function(){this.loadMajorCourses(this.$route.params.term)},methods:{removeDayInput:function(t){this.times.splice(t,1)},addDayInput:function(){this.times.push({day:"",time:""})},submitForm:function(t){var e=this;t.preventDefault(),"c"===this.$parent.form.type&&axios.post("/admin/classes/store",this.$parent.form.input).then((function(t){e.$root.post_success(t.data.success),e.$router.push({name:"ad.term.classes",params:{term:e.$parent.form.input.term_id}})}))},loadMajorCourses:function(t){var e=this;axios.get("/admin/get/major_courses/term="+t).then((function(t){e.major_term_classes=t.data.term_classes}))},searchCourses:function(){var t=this;axios.post("/admin/search/courses",{search:this.search.course}).then((function(e){t.courses=e.data.courses}))},searchVenue:function(){var t=this;axios.post("/admin/search/venues",{search:this.search.venue}).then((function(e){t.venues=e.data.venues}))}}},r=s(0),n={components:{FormClasses:Object(r.a)(a,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card shadow mb-4 mb-xl-0 col-md-10"},[s("div",{staticClass:"card-header bg-transparent"},[s("h2",{staticClass:"mb-0"},[t._v("\n                "+t._s(t.$parent.form.title)+"\n                "),s("p",[t._v(t._s(t.$parent.term.name))])])]),t._v(" "),s("div",{staticClass:"card-body"},[s("form",{on:{submit:t.submitForm}},[s("fake-form-input"),t._v(" "),s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-md-4"},[s("small",[t._v("Search courses by code and name")]),t._v(" "),s("div",{staticClass:"input-group mb-4"},[t._m(0),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.course,expression:"search.course"}],staticClass:"form-control",attrs:{placeholder:"....",type:"text"},domProps:{value:t.search.course},on:{input:[function(e){e.target.composing||t.$set(t.search,"course",e.target.value)},t.searchCourses]}})])]),t._v(" "),void 0!==t.$parent.form.input.course_id?s("div",{staticClass:"form-group mb-3 col-md-8"},[s("small",[t._v("Course found")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.courses.length>0,expression:"courses.length > 0"}],staticClass:"input-group"},[t._m(1),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.course_id,expression:"$parent.form.input.course_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.$parent.form.input,"course_id",e.target.multiple?s:s[0])}}},t._l(t.courses,(function(e){return s("option",{domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.code+" - "+e.name)+"\n                                ")])})),0)])]):t._e(),t._v(" "),t.major_term_classes.length?s("div",{staticClass:"form-group mb-3 col-12"},[s("small",[t._v("Major Course")]),t._v(" "),s("div",{staticClass:"input-group"},[t._m(2),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.major_course_id,expression:"$parent.form.input.major_course_id"}],staticClass:"form-control",on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.$parent.form.input,"major_course_id",e.target.multiple?s:s[0])}}},[s("option",{attrs:{value:""}},[t._v("** None")]),t._v(" "),t._l(t.major_term_classes,(function(e){return s("option",{domProps:{value:e.id}},[t._v("\n                                    "+t._s(e.course.name)+"\n                                ")])}))],2)])]):t._e()]),t._v(" "),null===this.$parent.term.external_exam_percentage?s("div",[s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-md-4"},[s("small",[t._v("Search venue by room number")]),t._v(" "),s("div",{staticClass:"input-group mb-4"},[t._m(3),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.search.venue,expression:"search.venue"}],staticClass:"form-control",attrs:{placeholder:"...",type:"text"},domProps:{value:t.search.venue},on:{input:[function(e){e.target.composing||t.$set(t.search,"venue",e.target.value)},t.searchVenue]}})])]),t._v(" "),void 0!==t.$parent.form.input.venue_id?s("div",{staticClass:"form-group mb-3 col-md-8"},[s("small",[t._v("Venues found")]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.venues.length>0,expression:"venues.length > 0"}],staticClass:"input-group"},[t._m(4),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.venue_id,expression:"$parent.form.input.venue_id"}],staticClass:"form-control",attrs:{required:""},on:{change:function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.$parent.form.input,"venue_id",e.target.multiple?s:s[0])}}},t._l(t.venues,(function(e){return s("option",{domProps:{value:e.id}},[t._v("\n                                        "+t._s(e.name)+"\n                                    ")])})),0)])]):t._e()]),t._v(" "),s("hr"),t._v(" "),t._l(Object.keys(t.times),(function(e){return s("div",{staticClass:"row"},[s("div",{staticClass:"form-group mb-3 col-md-6"},[s("div",{staticClass:"input-group"},[t._m(5,!0),t._v(" "),s("select",{directives:[{name:"model",rawName:"v-model",value:t.times[e].day,expression:"times[day].day"}],staticClass:"form-control",attrs:{required:""},on:{change:function(s){var a=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.times[e],"day",s.target.multiple?a:a[0])}}},t._l(t.week_days,(function(e){return s("option",{domProps:{value:e}},[t._v("\n                                        "+t._s(e)+"\n                                    ")])})),0)])]),t._v(" "),s("div",{staticClass:"col-md-4"},[s("div",{staticClass:"form-group"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.times[e].time,expression:"times[day].time"}],staticClass:"form-control",attrs:{type:"time",placeholder:"Time",required:""},domProps:{value:t.times[e].time},on:{input:function(s){s.target.composing||t.$set(t.times[e],"time",s.target.value)}}})])]),t._v(" "),s("div",{staticClass:"col-md-2"},[s("button",{staticClass:"btn btn-outline-danger btn-block",on:{click:function(s){return t.removeDayInput(e)}}},[s("i",{staticClass:"ni ni-fat-remove"})])])])})),t._v(" "),s("button",{staticClass:"btn btn-default",on:{click:t.addDayInput}},[s("i",{staticClass:"ni ni-fat-add"}),t._v(" Add\n                    ")]),t._v(" "),s("hr"),t._v(" "),s("div",{staticClass:"row"},[void 0!==t.$parent.form.input.size&&t.$parent.form.input._size?s("div",{staticClass:"col-md-6 form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(6),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.size,expression:"$parent.form.input.size"}],staticClass:"form-control",attrs:{type:"number",min:t.window.options.min_class_size,max:t.window.options.max_class_size,required:""},domProps:{value:t.$parent.form.input.size},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"size",e.target.value)}}})])]):t._e(),t._v(" "),void 0!==t.$parent.form.input.fee?s("div",{staticClass:"col-md-6 form-group mb-3"},[s("div",{staticClass:"input-group"},[t._m(7),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.$parent.form.input.fee,expression:"$parent.form.input.fee"}],staticClass:"form-control",attrs:{type:"number",required:""},domProps:{value:t.$parent.form.input.fee},on:{input:function(e){e.target.composing||t.$set(t.$parent.form.input,"fee",e.target.value)}}})])]):t._e()])],2):t._e(),t._v(" "),s("div",{staticClass:"modal-footer"},[s("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Save changes")]),t._v(" "),s("button",{staticClass:"btn btn-link ml-auto",attrs:{type:"button"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("\n                        Back\n                    ")])])],1)])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-zoom-split-in"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("\n                                            Course:\n                                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("\n                                            Course:\n                                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[e("i",{staticClass:"ni ni-zoom-split-in"})])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("\n                                            Venue:\n                                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("\n                                            Day:\n                                        ")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Class Size:")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"input-group-prepend"},[e("span",{staticClass:"input-group-text"},[this._v("Fee:")])])}],!1,null,"8a323e4a",null).exports},name:"TermClasses",data:function(){return{class_term:null,class_terms:{},term:{},form:null}},created:function(){this.fetchData()},watch:{$route:"fetchData"},methods:{fetchData:function(){var t=this;"create"===this.$route.params.ops?axios.get("/admin/terms/"+this.$route.params.term).then((function(e){t.term=e.data.term,t.class_term={},t.class_terms=null,t.form={type:"c",title:"New Class",input:{course_id:"",term_id:t.$route.params.term,venue_id:"",times:[{day:"",time:""}],size:t.term.set?t.term.set.profiles.length:null,_size:t.term.set?0:1}}})):this.get_class_terms(this.$route.params.term)},get_term:function(t){var e=this;axios.get("/admin/terms/"+t).then((function(t){e.term=t.data.term}))},get_class_terms:function(t){var e=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;axios.get("/admin/classes/term="+t+"?page="+s).then((function(t){e.class_terms=t.data.class_terms,e.term=t.data.term,e.class_term=null,e.form=null}))},get_class_term:function(t){var e=this;axios.get("/admin/classes/show="+t).then((function(t){e.class_term=t.data.class_term,e.class_terms=null}))}}},i=Object(r.a)(n,(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"col-md-12"},[t.class_terms&&!t.form?s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("h2",{staticClass:"mb-0"},[s("i",{staticClass:"ni ni-calendar-grid-58"}),t._v(" "),s("router-link",{attrs:{to:{name:"ad.terms",params:{id:t.term.id}}}},[t._v("\n                    "+t._s(t.term.name)+"\n                ")]),t._v(" "),s("div",{staticClass:"float-right"},[s("router-link",{staticClass:"btn btn-sm btn-outline-primary mb-3",attrs:{to:{name:"ad.term.classes",params:{ops:"create"}}}},[t._v("\n                        Add Class\n                    ")])],1)],1),t._v(" "),s("p",[t._v("\n                Classes\n            ")])]),t._v(" "),s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table align-items-center table-flush"},[t._m(0),t._v(" "),s("tbody",[t._l(t.class_terms.data,(function(e){return s("tr",[s("td",[s("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(s){return t.$parent.$router.push({name:"ad.show.classes",params:{class:e.id}})}}},[s("i",{staticClass:"ni ni-button-play"})])]),t._v(" "),s("th",{attrs:{scope:"row"}},[t._v(t._s(e.course.name))]),t._v(" "),e.venue_id?s("th",{attrs:{scope:"row"}},[t._v(t._s(e.venue.name))]):t._e(),t._v(" "),s("td",t._l(e.times,(function(e){return s("li",[s("strong",[t._v(t._s(e.day))]),t._v(", "+t._s(t.$root.moment(e.time))+"\n                        ")])})),0)])})),t._v(" "),t._m(1)],2)]),t._v(" "),s("laravel-vue-pagination",{attrs:{limit:5,data:t.class_terms,align:"center"},on:{"pagination-change-page":function(e){return t.$parent.get_class_terms(t.$route.params.term)}}})],1)]):t.form&&t.class_term?s("FormClasses"):s("div",{staticClass:"card shadow mb-4 mb-xl-0"},[s("div",{staticClass:"card-header bg-transparent"},[s("h2",{staticClass:"mb-0"},[s("i",{staticClass:"ni ni-calendar-grid-58"}),t._v("\n                "+t._s(t.class_term.name)+"\n            ")])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",{staticClass:"thead-light"},[e("tr",[e("th",{attrs:{scope:"col"}}),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Course")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Venue")]),this._v(" "),e("th",{attrs:{scope:"col"}},[this._v("Times")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{attrs:{scope:"row"}}),this._v(" "),e("td"),this._v(" "),e("td"),this._v(" "),e("td")])}],!1,null,"2a6b6182",null);e.default=i.exports}}]);